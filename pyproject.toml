[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"
backend-path = "."

[project]
name = "osm_osrm_server"
version = "0.0.2"
description = "An Open Street Map installer using PostgreSQL/PostGIS, all the way through to setting up a map server. Included is setting up GTFS data "
readme = "README.md"
authors = [
    { name = "Peter Lawler", email = "osmosrmserver@opentasmania.net" },
]
license = { text = "LGPLv3+" }
requires-python = ">=3.11" # Debian 12 comes with Python 3.11, so this is safe

dependencies = [
    "requests>=2.25.0", # For downloading GTFS zip files
    "psycopg2-binary>=2.9", # For PostgreSQL interaction (psycopg 3.x binary)
    "pandas>=1.3.0", # For data manipulation
    "gtfparse>=1.1.0,<2.0.0", # For parsing GTFS files
    # gtfsparse > 2.0.0 currently presents build issues due to pyarrow
    # TODO: Switch to 'gtfs-kit' for more advanced validation if gtfparse is limiting.
    "pydantic>=2.0.0", # For data validation and schema definitions
    "python-dotenv>=0.19.0", # For managing environment variables (e.g., .env file for DB creds)
    "PyYAML>=5.4.0"              # For any YAML configurations, or if a dependency needs it
]

classifiers = [
    "Development Status :: 3 - Alpha",
    "Intended Audience :: Developers",
    "Programming Language :: Python :: 3.11",
    "License :: OSI Approved :: GNU Lesser General Public License v3 or later (LGPLv3+)",
    "Natural Language :: English",
    "Operating System :: POSIX :: Linux",
    "Topic :: Scientific/Engineering :: GIS",
    "Topic :: Software Development :: Libraries :: Python Modules",
    "Topic :: Utilities",
]

[project.urls]
Homepage = "https://opentasmania.net"
Repository = "https://gitlab.com/opentasmania/osm-osrm-server"

[project.scripts]
run-gtfs-update = "osm_osrm_server.update_gtfs:main"
install-map-server = "osm_osrm_server.install_map_server:main"

[project.optional-dependencies]
dev = [
    "pytest>=7.0.0",
    "ruff>=0.1.0",
    "pre-commit>=3.0.0",
]

[tool.setuptools.packages.find]
where = ["."]
include = ["osm_osrm_server*"]
exclude = ["tests*"]

[tool.ruff]
line-length = 120
select = ["E", "F", "W", "I", "UP", "B", "C4", "SIM", "ARG", "RUF"]
ignore = ["E501"]

[tool.ruff.format]
quote-style = "double"

# Optional, uv often uses pyproject.toml directly
# [tool.uv.sources]
# gtfs_processor = { path = "." }
