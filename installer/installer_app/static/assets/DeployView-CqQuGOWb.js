import{i as k,r as P,d as l,o as n,e,f as S,F as D,m as R,n as _,t as r,h as $,E as T,G as B,H as U,I as X,J as O,y as Y,q as Z,K as ee,b as te,g as q,w as z,A as E,L as se}from"./vendor-kN0nZHKs.js";import{u as J}from"./deployment-CmKHV8r1.js";import{_ as F}from"./index-PO42XuGs.js";import{u as oe}from"./useWebSocket-xP0JVSl3.js";const ne={class:"environment-config"},ae={class:"space-y-4"},le=["onClick"],re={class:"absolute top-4 right-4"},ie={key:0,class:"w-2 h-2 bg-white rounded-full"},de={key:0,class:"absolute top-2 left-2 bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full"},ue={class:"flex items-start space-x-4"},ce={class:"text-3xl"},me={class:"flex-1"},pe={class:"text-lg font-semibold text-gray-900 mb-1"},ge={class:"text-gray-600 mb-4"},ve={class:"grid grid-cols-2 gap-2"},ye={key:0,class:"mt-8 p-6 bg-blue-50 rounded-lg"},be={class:"text-sm text-blue-800 space-y-2"},xe={key:0},fe={key:1},_e={key:2},he={class:"flex justify-end mt-8"},we=["disabled"],$e={__name:"EnvironmentConfig",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","next"],setup(x,{emit:V}){const h=x,d=V,s=k({get:()=>h.modelValue,set:C=>d("update:modelValue",C)}),y=P([{value:"local",label:"Local Development",description:"Deploy to your local development environment for testing and development.",icon:"💻",features:["Fast deployment","Debug mode enabled","Local storage","Development tools"],recommended:!0},{value:"staging",label:"Staging Environment",description:"Deploy to a staging environment for testing before production.",icon:"🧪",features:["Production-like setup","Testing environment","Shared resources","CI/CD integration"],recommended:!1},{value:"production",label:"Production Environment",description:"Deploy to the production environment for live usage.",icon:"🚀",features:["High availability","Optimized performance","Monitoring enabled","Backup systems"],recommended:!1}]),w=C=>{s.value=C.value},j=()=>{s.value&&d("next")};return(C,v)=>(n(),l("div",ne,[v[5]||(v[5]=e("div",{class:"mb-6"},[e("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"Select Deployment Environment"),e("p",{class:"text-gray-600"}," Choose the target environment where you want to deploy OpenJourney Server. ")],-1)),e("div",ae,[(n(!0),l(D,null,R(y.value,g=>(n(),l("div",{key:g.value,class:"environment-option relative cursor-pointer",onClick:c=>w(g)},[e("div",{class:_(["border-2 rounded-lg p-6 transition-all duration-200 hover:shadow-md",{"border-primary-500 bg-primary-50":s.value===g.value,"border-gray-200 hover:border-gray-300":s.value!==g.value}])},[e("div",re,[e("div",{class:_(["w-5 h-5 rounded-full border-2 flex items-center justify-center",{"border-primary-500 bg-primary-500":s.value===g.value,"border-gray-300":s.value!==g.value}])},[s.value===g.value?(n(),l("div",ie)):S("",!0)],2)]),g.recommended?(n(),l("div",de," Recommended ")):S("",!0),e("div",ue,[e("div",ce,r(g.icon),1),e("div",me,[e("h3",pe,r(g.label),1),e("p",ge,r(g.description),1),e("div",ve,[(n(!0),l(D,null,R(g.features,c=>(n(),l("div",{key:c,class:"flex items-center text-sm text-gray-500"},[v[0]||(v[0]=e("svg",{class:"w-4 h-4 text-green-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),$(" "+r(c),1)]))),128))])])])],2)],8,le))),128))]),s.value?(n(),l("div",ye,[v[4]||(v[4]=e("h4",{class:"text-lg font-semibold text-blue-900 mb-2"},"Environment Configuration",-1)),e("div",be,[s.value==="local"?(n(),l("div",xe,v[1]||(v[1]=[e("p",null,[e("strong",null,"Namespace:"),$(" openjourney-local")],-1),e("p",null,[e("strong",null,"Resource Limits:"),$(" Development optimized")],-1),e("p",null,[e("strong",null,"Storage:"),$(" Local persistent volumes")],-1),e("p",null,[e("strong",null,"Monitoring:"),$(" Basic logging enabled")],-1)]))):s.value==="staging"?(n(),l("div",fe,v[2]||(v[2]=[e("p",null,[e("strong",null,"Namespace:"),$(" openjourney-staging")],-1),e("p",null,[e("strong",null,"Resource Limits:"),$(" Medium allocation")],-1),e("p",null,[e("strong",null,"Storage:"),$(" Shared network storage")],-1),e("p",null,[e("strong",null,"Monitoring:"),$(" Full monitoring stack")],-1)]))):s.value==="production"?(n(),l("div",_e,v[3]||(v[3]=[e("p",null,[e("strong",null,"Namespace:"),$(" openjourney-production")],-1),e("p",null,[e("strong",null,"Resource Limits:"),$(" High availability setup")],-1),e("p",null,[e("strong",null,"Storage:"),$(" Redundant storage with backups")],-1),e("p",null,[e("strong",null,"Monitoring:"),$(" Complete observability suite")],-1)]))):S("",!0)])])):S("",!0),e("div",he,[e("button",{onClick:j,disabled:!s.value,class:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed"}," Continue to Component Selection ",8,we)])]))}},ke=F($e,[["__scopeId","data-v-0d891121"]]),Ce={class:"component-selection"},Se={class:"space-y-8"},De={class:"text-lg font-medium text-gray-900 mb-4"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pe=["onClick"],Ve={class:"absolute top-3 right-3"},je={key:0,class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},Me={key:0,class:"absolute top-1 left-1 bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded"},Ge={class:"flex items-start space-x-3"},Le={class:"text-2xl"},Be={class:"flex-1"},Ie={class:"text-lg font-semibold text-gray-900 mb-1"},Ee={class:"text-sm text-gray-600 mb-3"},Fe={class:"text-xs text-gray-500 mb-2"},Ae={class:"mr-3"},Ne={class:"mr-3"},Ue={class:"flex flex-wrap gap-1"},Oe={key:0,class:"inline-block text-gray-500 text-xs px-1"},qe={class:"mt-8 p-6 bg-gray-50 rounded-lg"},ze={class:"grid grid-cols-3 gap-4 text-center"},Te={class:"bg-white p-4 rounded-lg"},Je={class:"text-2xl font-bold text-blue-600"},We={class:"bg-white p-4 rounded-lg"},He={class:"text-2xl font-bold text-green-600"},Qe={class:"bg-white p-4 rounded-lg"},Ke={class:"text-2xl font-bold text-purple-600"},Xe={key:0,class:"mt-6 p-4 bg-blue-50 rounded-lg"},Ye={class:"font-medium text-blue-900 mb-2"},Ze={class:"flex flex-wrap gap-2"},et={class:"flex justify-between mt-8"},tt=["disabled"],st={__name:"ComponentSelection",props:{modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue","next","back"],setup(x,{emit:V}){const h=x,d=V,s=k({get:()=>h.modelValue,set:m=>d("update:modelValue",m)}),y=P([{id:"openjourney-server",name:"OpenJourney Server",description:"Core server application with routing and API services",icon:"🚀",required:!0,category:"core",resources:{cpu:"500m",memory:"1Gi",storage:"5Gi"},dependencies:[],features:["REST API","Route planning","Data processing","Plugin system"]},{id:"openjourney-web",name:"Web Interface",description:"Frontend web application for user interaction",icon:"🌐",required:!1,category:"frontend",resources:{cpu:"100m",memory:"256Mi",storage:"1Gi"},dependencies:["openjourney-server"],features:["Interactive maps","Route visualization","User dashboard","Mobile responsive"]},{id:"openjourney-api",name:"API Gateway",description:"API gateway for external integrations and rate limiting",icon:"🔌",required:!1,category:"integration",resources:{cpu:"200m",memory:"512Mi",storage:"2Gi"},dependencies:["openjourney-server"],features:["Rate limiting","Authentication","API versioning","Request routing"]},{id:"openjourney-database",name:"Database",description:"PostgreSQL database with PostGIS extensions",icon:"🗄️",required:!0,category:"data",resources:{cpu:"1000m",memory:"2Gi",storage:"20Gi"},dependencies:[],features:["PostGIS support","Automated backups","High availability","Performance tuning"]},{id:"openjourney-redis",name:"Redis Cache",description:"In-memory caching and session storage",icon:"⚡",required:!1,category:"data",resources:{cpu:"100m",memory:"512Mi",storage:"1Gi"},dependencies:[],features:["Session storage","Query caching","Real-time data","Pub/Sub messaging"]},{id:"openjourney-monitoring",name:"Monitoring Stack",description:"Prometheus, Grafana, and alerting services",icon:"📊",required:!1,category:"ops",resources:{cpu:"300m",memory:"1Gi",storage:"10Gi"},dependencies:[],features:["Metrics collection","Dashboards","Alerting","Log aggregation"]}]),w=k(()=>{const m={};return y.value.forEach(o=>{m[o.category]||(m[o.category]=[]),m[o.category].push(o)}),m}),j={core:"Core Services",frontend:"Frontend",integration:"Integration",data:"Data Layer",ops:"Operations"},C=m=>{if(m.required)return;if(s.value.findIndex(t=>t===m.id)>-1){const t=s.value.filter(i=>!y.value.find(G=>G.id===i).dependencies.includes(m.id)&&i!==m.id);s.value=t}else{const t=[...s.value];m.dependencies.forEach(i=>{t.includes(i)||t.push(i)}),t.push(m.id),s.value=t}},v=m=>s.value.includes(m),g=m=>m.required?!1:m.dependencies.some(o=>!s.value.includes(o)),c=k(()=>y.value.filter(o=>s.value.includes(o.id)).reduce((o,t)=>({cpu:o.cpu+parseInt(t.resources.cpu),memory:o.memory+parseFloat(t.resources.memory),storage:o.storage+parseInt(t.resources.storage)}),{cpu:0,memory:0,storage:0}));(()=>{const m=y.value.filter(o=>o.required).map(o=>o.id);s.value.length===0&&(s.value=m)})();const M=()=>{s.value.length>0&&d("next")},f=()=>{d("back")};return(m,o)=>(n(),l("div",Ce,[o[5]||(o[5]=e("div",{class:"mb-6"},[e("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"Select Components"),e("p",{class:"text-gray-600"}," Choose which OpenJourney Server components to deploy. Required components are automatically selected. ")],-1)),e("div",Se,[(n(!0),l(D,null,R(w.value,(t,i)=>(n(),l("div",{key:i},[e("h3",De,r(j[i]),1),e("div",Re,[(n(!0),l(D,null,R(t,p=>(n(),l("div",{key:p.id,class:"component-card relative"},[e("div",{class:_(["border-2 rounded-lg p-4 transition-all duration-200 cursor-pointer",{"border-primary-500 bg-primary-50":v(p.id),"border-gray-200 hover:border-gray-300":!v(p.id)&&!g(p),"border-gray-100 bg-gray-50 cursor-not-allowed":g(p)}]),onClick:G=>C(p)},[e("div",Ve,[e("div",{class:_(["w-5 h-5 rounded border-2 flex items-center justify-center",{"border-primary-500 bg-primary-500":v(p.id),"border-gray-300":!v(p.id)}])},[v(p.id)?(n(),l("svg",je,o[0]||(o[0]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):S("",!0)],2)]),p.required?(n(),l("div",Me," Required ")):S("",!0),e("div",Ge,[e("div",Le,r(p.icon),1),e("div",Be,[e("h4",Ie,r(p.name),1),e("p",Ee,r(p.description),1),e("div",Fe,[e("span",Ae,"CPU: "+r(p.resources.cpu),1),e("span",Ne,"Memory: "+r(p.resources.memory),1),e("span",null,"Storage: "+r(p.resources.storage),1)]),e("div",Ue,[(n(!0),l(D,null,R(p.features.slice(0,2),G=>(n(),l("span",{key:G,class:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded"},r(G),1))),128)),p.features.length>2?(n(),l("span",Oe," +"+r(p.features.length-2)+" more ",1)):S("",!0)])])])],10,Pe)]))),128))])]))),128))]),e("div",qe,[o[4]||(o[4]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resource Requirements Summary",-1)),e("div",ze,[e("div",Te,[e("div",Je,r(c.value.cpu)+"m",1),o[1]||(o[1]=e("div",{class:"text-sm text-gray-600"},"CPU",-1))]),e("div",We,[e("div",He,r(c.value.memory.toFixed(1))+"Gi",1),o[2]||(o[2]=e("div",{class:"text-sm text-gray-600"},"Memory",-1))]),e("div",Qe,[e("div",Ke,r(c.value.storage)+"Gi",1),o[3]||(o[3]=e("div",{class:"text-sm text-gray-600"},"Storage",-1))])])]),s.value.length>0?(n(),l("div",Xe,[e("h5",Ye,"Selected Components ("+r(s.value.length)+")",1),e("div",Ze,[(n(!0),l(D,null,R(s.value,t=>{var i;return n(),l("span",{key:t,class:"inline-block bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full"},r((i=y.value.find(p=>p.id===t))==null?void 0:i.name),1)}),128))])])):S("",!0),e("div",et,[e("button",{onClick:f,class:"btn btn-secondary"}," Back to Environment "),e("button",{onClick:M,disabled:s.value.length===0,class:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed"}," Continue to Configuration ",8,tt)])]))}},ot=F(st,[["__scopeId","data-v-78d82a27"]]),nt={class:"deployment-config"},at={class:"mb-8"},lt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},rt=["onClick"],it={class:"text-center"},dt={class:"text-2xl mb-2"},ut={class:"font-semibold text-gray-900 mb-1"},ct={class:"text-xs text-gray-600 mb-3"},mt={class:"text-xs text-gray-500 space-y-1"},pt={class:"mb-8"},gt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},vt={class:"relative"},yt={key:0,class:"text-red-600 text-sm mt-1"},bt={key:1,class:"text-gray-500 text-sm mt-1"},xt={class:"relative"},ft={key:0,class:"text-red-600 text-sm mt-1"},_t={key:1,class:"text-gray-500 text-sm mt-1"},ht={class:"relative"},wt={key:0,class:"text-red-600 text-sm mt-1"},$t={key:1,class:"text-gray-500 text-sm mt-1"},kt={class:"mb-8"},Ct={class:"space-y-3"},St=["id","value"],Dt=["for"],Rt={class:"font-medium text-gray-900"},Pt={class:"text-sm text-gray-600"},Vt={class:"mb-8"},jt={class:"space-y-4"},Mt={class:"flex items-start"},Gt={class:"flex items-start"},Lt={class:"flex items-start"},Bt={class:"mb-8 p-6 bg-gray-50 rounded-lg"},It={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Et={class:"space-y-2 text-sm"},Ft={class:"flex justify-between"},At={class:"font-medium"},Nt={class:"flex justify-between"},Ut={class:"font-medium"},Ot={class:"flex justify-between"},qt={class:"font-medium"},zt={class:"text-3xl font-bold text-primary-600 mb-2"},Tt={class:"flex justify-between"},Jt=["disabled"],Wt={__name:"DeploymentConfig",props:{modelValue:{type:Object,default:()=>({cpu:"",memory:"",storage:""})},options:{type:Object,default:()=>({overwrite:!1,production:!1,autoScale:!1})}},emits:["update:modelValue","update:options","next","back"],setup(x,{emit:V}){const h=x,d=V,s=k({get:()=>h.modelValue,set:o=>d("update:modelValue",o)}),y=k({get:()=>h.options,set:o=>d("update:options",o)}),w=P([{name:"Development",description:"Minimal resources for development and testing",icon:"🧪",cpu:"2",memory:"4",storage:"50",recommended:"local"},{name:"Small Production",description:"Small production deployment for limited users",icon:"🏢",cpu:"4",memory:"8",storage:"100",recommended:"staging"},{name:"Medium Production",description:"Medium production deployment for moderate load",icon:"🏭",cpu:"8",memory:"16",storage:"200",recommended:"production"},{name:"Large Production",description:"Large production deployment for high load",icon:"🌐",cpu:"16",memory:"32",storage:"500",recommended:"production"}]),j=P([{value:"standard",label:"Standard SSD",description:"Good performance for most workloads"},{value:"fast",label:"Fast SSD",description:"High performance for demanding applications"},{value:"network",label:"Network Storage",description:"Shared storage with backup capabilities"}]),C=P("standard"),v=o=>{s.value={cpu:o.cpu,memory:o.memory,storage:o.storage}},g=(o,t)=>{const i=parseFloat(o);if(isNaN(i)||i<=0)return!1;switch(t){case"cpu":return i>=.5&&i<=64;case"memory":return i>=1&&i<=256;case"storage":return i>=10&&i<=2e3;default:return!1}},c=k(()=>({cpu:{valid:g(s.value.cpu,"cpu"),message:"CPU must be between 0.5 and 64 cores"},memory:{valid:g(s.value.memory,"memory"),message:"Memory must be between 1 and 256 GB"},storage:{valid:g(s.value.storage,"storage"),message:"Storage must be between 10 and 2000 GB"}})),L=k(()=>Object.values(c.value).every(o=>o.valid)),M=k(()=>{if(!L.value)return 0;const o=parseFloat(s.value.cpu)||0,t=parseFloat(s.value.memory)||0,i=parseFloat(s.value.storage)||0,p=o*30,G=t*5,A=i*.1;return Math.round((p+G+A)*100)/100}),f=()=>{L.value&&d("next")},m=()=>{d("back")};return T(y,o=>{d("update:options",o)},{deep:!0}),(o,t)=>(n(),l("div",nt,[t[27]||(t[27]=e("div",{class:"mb-6"},[e("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"Resource Configuration"),e("p",{class:"text-gray-600"}," Configure the resource allocation and deployment options for your OpenJourney Server installation. ")],-1)),e("div",at,[t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Quick Presets",-1)),e("div",lt,[(n(!0),l(D,null,R(w.value,i=>(n(),l("div",{key:i.name,class:"preset-card cursor-pointer border-2 border-gray-200 rounded-lg p-4 hover:border-primary-300 transition-colors",onClick:p=>v(i)},[e("div",it,[e("div",dt,r(i.icon),1),e("h4",ut,r(i.name),1),e("p",ct,r(i.description),1),e("div",mt,[e("div",null,r(i.cpu)+" CPU cores",1),e("div",null,r(i.memory)+" GB RAM",1),e("div",null,r(i.storage)+" GB storage",1)])])],8,rt))),128))])]),e("div",pt,[t[14]||(t[14]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Custom Resource Allocation",-1)),e("div",gt,[e("div",null,[t[9]||(t[9]=e("label",{class:"form-label"},"CPU Cores",-1)),e("div",vt,[B(e("input",{"onUpdate:modelValue":t[0]||(t[0]=i=>s.value.cpu=i),type:"number",step:"0.5",min:"0.5",max:"64",class:_(["form-input",{"border-red-300 focus:border-red-500":!c.value.cpu.valid&&s.value.cpu,"border-green-300 focus:border-green-500":c.value.cpu.valid&&s.value.cpu}]),placeholder:"e.g., 2"},null,2),[[U,s.value.cpu]]),t[8]||(t[8]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-sm"},"cores")],-1))]),!c.value.cpu.valid&&s.value.cpu?(n(),l("p",yt,r(c.value.cpu.message),1)):(n(),l("p",bt," Number of CPU cores to allocate "))]),e("div",null,[t[11]||(t[11]=e("label",{class:"form-label"},"Memory (RAM)",-1)),e("div",xt,[B(e("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>s.value.memory=i),type:"number",step:"1",min:"1",max:"256",class:_(["form-input",{"border-red-300 focus:border-red-500":!c.value.memory.valid&&s.value.memory,"border-green-300 focus:border-green-500":c.value.memory.valid&&s.value.memory}]),placeholder:"e.g., 4"},null,2),[[U,s.value.memory]]),t[10]||(t[10]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-sm"},"GB")],-1))]),!c.value.memory.valid&&s.value.memory?(n(),l("p",ft,r(c.value.memory.message),1)):(n(),l("p",_t," Amount of RAM to allocate "))]),e("div",null,[t[13]||(t[13]=e("label",{class:"form-label"},"Storage",-1)),e("div",ht,[B(e("input",{"onUpdate:modelValue":t[2]||(t[2]=i=>s.value.storage=i),type:"number",step:"10",min:"10",max:"2000",class:_(["form-input",{"border-red-300 focus:border-red-500":!c.value.storage.valid&&s.value.storage,"border-green-300 focus:border-green-500":c.value.storage.valid&&s.value.storage}]),placeholder:"e.g., 50"},null,2),[[U,s.value.storage]]),t[12]||(t[12]=e("div",{class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 text-sm"},"GB")],-1))]),!c.value.storage.valid&&s.value.storage?(n(),l("p",wt,r(c.value.storage.message),1)):(n(),l("p",$t," Persistent storage allocation "))])])]),e("div",kt,[t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Storage Type",-1)),e("div",Ct,[(n(!0),l(D,null,R(j.value,i=>(n(),l("div",{key:i.value,class:"flex items-center"},[B(e("input",{id:i.value,"onUpdate:modelValue":t[3]||(t[3]=p=>C.value=p),value:i.value,type:"radio",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"},null,8,St),[[X,C.value]]),e("label",{for:i.value,class:"ml-3 flex-1"},[e("div",Rt,r(i.label),1),e("div",Pt,r(i.description),1)],8,Dt)]))),128))])]),e("div",Vt,[t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Deployment Options",-1)),e("div",jt,[e("div",Mt,[B(e("input",{id:"overwrite","onUpdate:modelValue":t[4]||(t[4]=i=>y.value.overwrite=i),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded mt-1"},null,512),[[O,y.value.overwrite]]),t[16]||(t[16]=e("label",{for:"overwrite",class:"ml-3"},[e("div",{class:"font-medium text-gray-900"},"Overwrite existing deployment"),e("div",{class:"text-sm text-gray-600"},"Replace any existing OpenJourney Server deployment")],-1))]),e("div",Gt,[B(e("input",{id:"production","onUpdate:modelValue":t[5]||(t[5]=i=>y.value.production=i),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded mt-1"},null,512),[[O,y.value.production]]),t[17]||(t[17]=e("label",{for:"production",class:"ml-3"},[e("div",{class:"font-medium text-gray-900"},"Production mode"),e("div",{class:"text-sm text-gray-600"},"Enable production optimizations and security settings")],-1))]),e("div",Lt,[B(e("input",{id:"autoScale","onUpdate:modelValue":t[6]||(t[6]=i=>y.value.autoScale=i),type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded mt-1"},null,512),[[O,y.value.autoScale]]),t[18]||(t[18]=e("label",{for:"autoScale",class:"ml-3"},[e("div",{class:"font-medium text-gray-900"},"Enable auto-scaling"),e("div",{class:"text-sm text-gray-600"},"Automatically scale resources based on demand")],-1))])])]),e("div",Bt,[t[26]||(t[26]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-4"},"Configuration Summary",-1)),e("div",It,[e("div",null,[t[23]||(t[23]=e("h5",{class:"font-medium text-gray-900 mb-2"},"Resource Allocation",-1)),e("div",Et,[e("div",Ft,[t[20]||(t[20]=e("span",{class:"text-gray-600"},"CPU:",-1)),e("span",At,r(s.value.cpu||"0")+" cores",1)]),e("div",Nt,[t[21]||(t[21]=e("span",{class:"text-gray-600"},"Memory:",-1)),e("span",Ut,r(s.value.memory||"0")+" GB",1)]),e("div",Ot,[t[22]||(t[22]=e("span",{class:"text-gray-600"},"Storage:",-1)),e("span",qt,r(s.value.storage||"0")+" GB ("+r(C.value)+")",1)])])]),e("div",null,[t[24]||(t[24]=e("h5",{class:"font-medium text-gray-900 mb-2"},"Estimated Monthly Cost",-1)),e("div",zt," $"+r(M.value.toFixed(2)),1),t[25]||(t[25]=e("p",{class:"text-sm text-gray-600"}," Estimated cost based on resource allocation ",-1))])])]),e("div",Tt,[e("button",{onClick:m,class:"btn btn-secondary"}," Back to Components "),e("button",{onClick:f,disabled:!L.value,class:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed"}," Continue to Review ",8,Jt)])]))}},Ht=F(Wt,[["__scopeId","data-v-77e4bfa0"]]),Qt={class:"deployment-review"},Kt={key:0,class:"space-y-6"},Xt={class:"card p-6"},Yt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zt={class:"flex items-center space-x-3"},es={class:"text-2xl"},ts={class:"font-medium"},ss={class:"text-sm text-gray-600"},os={class:"space-y-1 text-sm"},ns={class:"flex items-center"},as={class:"w-4 h-4 mr-2"},ls={class:"flex items-center"},rs={class:"w-4 h-4 mr-2"},is={class:"flex items-center"},ds={class:"w-4 h-4 mr-2"},us={class:"card p-6"},cs={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ms={class:"font-medium text-gray-900"},ps={class:"mt-4 text-sm text-gray-600"},gs={class:"card p-6"},vs={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},ys={class:"text-center"},bs={class:"text-3xl font-bold text-blue-600"},xs={class:"text-center"},fs={class:"text-3xl font-bold text-green-600"},_s={class:"text-center"},hs={class:"text-3xl font-bold text-purple-600"},ws={class:"text-center"},$s={class:"text-3xl font-bold text-orange-600"},ks={key:1,class:"space-y-6"},Cs={class:"card p-6"},Ss={class:"mb-4"},Ds={class:"flex justify-between text-sm text-gray-600 mb-2"},Rs={class:"w-full bg-gray-200 rounded-full h-3"},Ps={class:"card p-6"},Vs={class:"space-y-3"},js={class:"card p-6"},Ms={class:"bg-gray-900 rounded-lg p-4 max-h-64 overflow-y-auto"},Gs={class:"text-gray-400"},Ls={key:0,class:"text-gray-400 text-sm"},Bs={class:"flex justify-between mt-8"},Is=["disabled"],Es={key:1,disabled:"",class:"btn btn-primary opacity-50 cursor-not-allowed"},Fs={__name:"DeploymentReview",props:{config:{type:Object,required:!0}},emits:["deploy","back"],setup(x,{emit:V}){const h=x,d=V;J();const s=P(!1),y=P(0),w=P([]),j=`ws://${window.location.host}/ws/deployment`,{isConnected:C,connect:v,send:g,on:c}=oe(j,{autoConnect:!1,reconnectInterval:3e3,maxReconnectAttempts:5}),L={local:"Local Development",staging:"Staging Environment",production:"Production Environment"},M={"openjourney-server":"OpenJourney Server","openjourney-web":"Web Interface","openjourney-api":"API Gateway","openjourney-database":"Database","openjourney-redis":"Redis Cache","openjourney-monitoring":"Monitoring Stack"},f=k(()=>h.config.components.map(b=>({id:b,name:M[b]||b}))),m=k(()=>{const b=parseFloat(h.config.resources.cpu)||0,a=parseFloat(h.config.resources.memory)||0,u=parseFloat(h.config.resources.storage)||0;return{cpu:b,memory:a,storage:u}}),o=k(()=>{const{cpu:b,memory:a,storage:u}=m.value,N=b*30,Q=a*5,K=u*.1;return Math.round((N+Q+K)*100)/100}),t=P([{id:1,name:"Validating configuration",status:"pending"},{id:2,name:"Creating namespace",status:"pending"},{id:3,name:"Deploying database",status:"pending"},{id:4,name:"Deploying core services",status:"pending"},{id:5,name:"Deploying additional components",status:"pending"},{id:6,name:"Configuring networking",status:"pending"},{id:7,name:"Running health checks",status:"pending"},{id:8,name:"Finalizing deployment",status:"pending"}]),i=async()=>{s.value=!0,y.value=0,w.value=[];try{C.value||await v();const b=`deployment-${Date.now()}`;g({type:"start_deployment",deploymentId:b,config:h.config}),p(b)}catch(b){console.error("Failed to start deployment:",b),w.value.push({id:Date.now(),timestamp:new Date().toLocaleTimeString(),level:"error",message:`Failed to start deployment: ${b.message}`}),s.value=!1}},p=b=>{c("deployment_progress",a=>{if(a.deploymentId===b&&(y.value=a.progress,a.currentStep&&a.currentStep<=t.value.length)){const u=t.value[a.currentStep-1];u&&(u.status=a.stepStatus||"running")}}),c("deployment_log",a=>{a.deploymentId===b&&w.value.push({id:Date.now()+Math.random(),timestamp:new Date().toLocaleTimeString(),level:a.level||"info",message:a.message})}),c("deployment_complete",a=>{a.deploymentId===b&&(s.value=!1,y.value=100,w.value.push({id:Date.now(),timestamp:new Date().toLocaleTimeString(),level:"success",message:"Deployment completed successfully!"}),t.value.forEach(u=>{u.status!=="completed"&&(u.status="completed")}),setTimeout(()=>{d("deploy")},2e3))}),c("deployment_error",a=>{if(a.deploymentId===b){s.value=!1,w.value.push({id:Date.now(),timestamp:new Date().toLocaleTimeString(),level:"error",message:`Deployment failed: ${a.error}`});const u=t.value.find(N=>N.status==="running");u&&(u.status="failed")}})},G=()=>{i()},A=()=>{s.value||d("back")},W=b=>{switch(b){case"completed":return"✓";case"running":return"⟳";case"failed":return"✗";default:return"○"}},H=b=>{switch(b){case"error":return"text-red-600";case"warning":return"text-yellow-600";case"success":return"text-green-600";default:return"text-gray-600"}};return(b,a)=>(n(),l("div",Qt,[a[17]||(a[17]=e("div",{class:"mb-6"},[e("h2",{class:"text-2xl font-semibold text-gray-900 mb-2"},"Review & Deploy"),e("p",{class:"text-gray-600"}," Review your configuration and start the deployment process. ")],-1)),s.value?S("",!0):(n(),l("div",Kt,[e("div",Xt,[a[2]||(a[2]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Environment Configuration",-1)),e("div",Yt,[e("div",null,[a[0]||(a[0]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Target Environment",-1)),e("div",Zt,[e("div",es,r(x.config.environment==="local"?"💻":x.config.environment==="staging"?"🧪":"🚀"),1),e("div",null,[e("div",ts,r(L[x.config.environment]),1),e("div",ss,r(x.config.environment)+" deployment",1)])])]),e("div",null,[a[1]||(a[1]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Deployment Options",-1)),e("div",os,[e("div",ns,[e("span",as,r(x.config.options.overwrite?"✓":"○"),1),e("span",{class:_(x.config.options.overwrite?"text-gray-900":"text-gray-500")}," Overwrite existing deployment ",2)]),e("div",ls,[e("span",rs,r(x.config.options.production?"✓":"○"),1),e("span",{class:_(x.config.options.production?"text-gray-900":"text-gray-500")}," Production mode ",2)]),e("div",is,[e("span",ds,r(x.config.options.autoScale?"✓":"○"),1),e("span",{class:_(x.config.options.autoScale?"text-gray-900":"text-gray-500")}," Auto-scaling enabled ",2)])])])])]),e("div",us,[a[4]||(a[4]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Selected Components",-1)),e("div",cs,[(n(!0),l(D,null,R(f.value,u=>(n(),l("div",{key:u.id,class:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg"},[a[3]||(a[3]=e("div",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),e("span",ms,r(u.name),1)]))),128))]),e("div",ps," Total components: "+r(f.value.length),1)]),e("div",gs,[a[9]||(a[9]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Resource Allocation",-1)),e("div",vs,[e("div",ys,[e("div",bs,r(m.value.cpu),1),a[5]||(a[5]=e("div",{class:"text-sm text-gray-600"},"CPU Cores",-1))]),e("div",xs,[e("div",fs,r(m.value.memory),1),a[6]||(a[6]=e("div",{class:"text-sm text-gray-600"},"GB Memory",-1))]),e("div",_s,[e("div",hs,r(m.value.storage),1),a[7]||(a[7]=e("div",{class:"text-sm text-gray-600"},"GB Storage",-1))]),e("div",ws,[e("div",$s,"$"+r(o.value.toFixed(2)),1),a[8]||(a[8]=e("div",{class:"text-sm text-gray-600"},"Monthly Cost",-1))])])]),a[10]||(a[10]=Y('<div class="card p-6" data-v-9dabfb28><h3 class="text-lg font-semibold text-gray-900 mb-4" data-v-9dabfb28>Pre-deployment Checklist</h3><div class="space-y-3" data-v-9dabfb28><div class="flex items-center" data-v-9dabfb28><span class="w-4 h-4 mr-3 text-green-500" data-v-9dabfb28>✓</span><span class="text-gray-700" data-v-9dabfb28>Configuration validated</span></div><div class="flex items-center" data-v-9dabfb28><span class="w-4 h-4 mr-3 text-green-500" data-v-9dabfb28>✓</span><span class="text-gray-700" data-v-9dabfb28>Resource requirements verified</span></div><div class="flex items-center" data-v-9dabfb28><span class="w-4 h-4 mr-3 text-green-500" data-v-9dabfb28>✓</span><span class="text-gray-700" data-v-9dabfb28>Component dependencies resolved</span></div><div class="flex items-center" data-v-9dabfb28><span class="w-4 h-4 mr-3 text-green-500" data-v-9dabfb28>✓</span><span class="text-gray-700" data-v-9dabfb28>Target environment accessible</span></div></div></div>',1))])),s.value?(n(),l("div",ks,[e("div",Cs,[a[12]||(a[12]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Deployment Progress",-1)),e("div",Ss,[e("div",Ds,[a[11]||(a[11]=e("span",null,"Progress",-1)),e("span",null,r(y.value)+"%",1)]),e("div",Rs,[e("div",{class:"bg-primary-600 h-3 rounded-full transition-all duration-500",style:Z({width:`${y.value}%`})},null,4)])])]),e("div",Ps,[a[13]||(a[13]=e("h4",{class:"font-semibold text-gray-900 mb-4"},"Deployment Steps",-1)),e("div",Vs,[(n(!0),l(D,null,R(t.value,u=>(n(),l("div",{key:u.id,class:"flex items-center space-x-3"},[e("div",{class:_(["w-6 h-6 rounded-full flex items-center justify-center text-sm font-medium",{"bg-green-100 text-green-600":u.status==="completed","bg-blue-100 text-blue-600 animate-spin":u.status==="running","bg-red-100 text-red-600":u.status==="failed","bg-gray-100 text-gray-400":u.status==="pending"}])},r(W(u.status)),3),e("span",{class:_(["flex-1",{"text-gray-900 font-medium":u.status==="running","text-green-600":u.status==="completed","text-red-600":u.status==="failed","text-gray-500":u.status==="pending"}])},r(u.name),3)]))),128))])]),e("div",js,[a[14]||(a[14]=e("h4",{class:"font-semibold text-gray-900 mb-4"},"Deployment Logs",-1)),e("div",Ms,[(n(!0),l(D,null,R(w.value,u=>(n(),l("div",{key:u.id,class:"text-sm font-mono mb-1"},[e("span",Gs,r(u.timestamp),1),e("span",{class:_(["mx-2",H(u.level)])},r(u.message),3)]))),128)),w.value.length===0?(n(),l("div",Ls," Waiting for deployment to start... ")):S("",!0)])])])):S("",!0),e("div",Bs,[e("button",{onClick:A,disabled:s.value,class:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"}," Back to Configuration ",8,Is),s.value?(n(),l("button",Es,a[16]||(a[16]=[e("span",{class:"flex items-center"},[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),$(" Deploying... ")],-1)]))):(n(),l("button",{key:0,onClick:G,class:"btn btn-primary bg-green-600 hover:bg-green-700 border-green-600"},a[15]||(a[15]=[e("span",{class:"flex items-center"},[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 3l14 9-14 9V3z"})]),$(" Start Deployment ")],-1)])))])]))}},As=F(Fs,[["__scopeId","data-v-9dabfb28"]]),Ns={class:"deployment-wizard max-w-4xl mx-auto"},Us={class:"wizard-steps mb-8"},Os={class:"flex items-center justify-between"},qs={key:0,class:"text-white"},zs={key:1},Ts={key:0,class:"flex-1 mx-4"},Js={class:"flex justify-between mt-4"},Ws={class:"card p-8 min-h-96"},Hs={class:"wizard-controls flex justify-between mt-8"},Qs=["disabled"],Ks={class:"flex space-x-4"},Xs=["disabled"],I=4,Ys={__name:"DeploymentWizard",setup(x){const V=ee(),h=J(),d=P(1),s=P({environment:"",components:[],resources:{cpu:"",memory:"",storage:""},options:{overwrite:!1,production:!1,autoScale:!1}}),y=["Environment Selection","Component Selection","Resource Configuration","Review & Deploy"],w=k(()=>{switch(d.value){case 1:return s.value.environment!=="";case 2:return s.value.components.length>0;case 3:return s.value.resources.cpu&&s.value.resources.memory;case 4:return!0;default:return!1}}),j=k(()=>d.value>1),C=k(()=>d.value<I&&w.value),v=k(()=>d.value===I),g=()=>{C.value&&d.value++},c=()=>{j.value&&d.value--},L=async()=>{try{await h.deploy(s.value),V.push("/dashboard")}catch(M){console.error("Deployment failed:",M)}};return T(s,M=>{h.updateConfig(M)},{deep:!0}),(M,f)=>{const m=te("RouterLink");return n(),l("div",Ns,[f[5]||(f[5]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Deploy OpenJourney Server"),e("p",{class:"text-gray-600"}," Follow the steps below to configure and deploy OpenJourney Server to your chosen environment. ")],-1)),e("div",Us,[e("div",Os,[(n(),l(D,null,R(I,o=>e("div",{key:o,class:_(["flex items-center",{"flex-1":o<I}])},[e("div",{class:_(["step-indicator flex items-center justify-center w-10 h-10 rounded-full border-2 text-sm font-medium",{"bg-primary-600 border-primary-600 text-white":d.value>=o,"border-gray-300 text-gray-500":d.value<o,"bg-green-600 border-green-600":d.value>o}])},[d.value>o?(n(),l("span",qs,"✓")):(n(),l("span",zs,r(o),1))],2),o<I?(n(),l("div",Ts,[e("div",{class:_(["h-1 rounded-full",{"bg-primary-600":d.value>o,"bg-gray-300":d.value<=o}])},null,2)])):S("",!0)],2)),64))]),e("div",Js,[(n(),l(D,null,R(y,(o,t)=>e("div",{key:t,class:_(["text-sm text-center",{"text-primary-600 font-medium":d.value===t+1,"text-gray-500":d.value!==t+1}]),style:{width:"calc(100% / 4)"}},r(o),3)),64))])]),e("div",Ws,[q(se,{name:"slide",mode:"out-in"},{default:z(()=>[d.value===1?(n(),E(ke,{key:0,modelValue:s.value.environment,"onUpdate:modelValue":f[0]||(f[0]=o=>s.value.environment=o),onNext:g},null,8,["modelValue"])):d.value===2?(n(),E(ot,{key:1,modelValue:s.value.components,"onUpdate:modelValue":f[1]||(f[1]=o=>s.value.components=o),onNext:g,onBack:c},null,8,["modelValue"])):d.value===3?(n(),E(Ht,{key:2,modelValue:s.value.resources,"onUpdate:modelValue":f[2]||(f[2]=o=>s.value.resources=o),options:s.value.options,"onUpdate:options":f[3]||(f[3]=o=>s.value.options=o),onNext:g,onBack:c},null,8,["modelValue","options"])):d.value===4?(n(),E(As,{key:3,config:s.value,onDeploy:L,onBack:c},null,8,["config"])):S("",!0)]),_:1})]),e("div",Hs,[e("button",{onClick:c,disabled:!j.value,class:"btn btn-secondary disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,Qs),e("div",Ks,[q(m,{to:"/",class:"btn btn-outline"},{default:z(()=>f[4]||(f[4]=[$(" Cancel ")])),_:1,__:[4]}),v.value?S("",!0):(n(),l("button",{key:0,onClick:g,disabled:!w.value,class:"btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,Xs))])])])}}},Zs=F(Ys,[["__scopeId","data-v-a8b070f6"]]),no={__name:"DeployView",setup(x){return(V,h)=>(n(),E(Zs))}};export{no as default};
