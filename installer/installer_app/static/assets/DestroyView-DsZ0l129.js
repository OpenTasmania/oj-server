import{r as c,s as D,d as r,n as v,e,f as m,v as C,x as _,y as L,F as p,p as y,h as a,t as i,g as j,w as S,b as R,o as l}from"./vendor-CDGcaY8A.js";const N={class:"max-w-4xl mx-auto"},V={class:"card p-8"},T=["value"],z={class:"space-y-2"},B=["id","checked","onChange"],M=["for"],E={class:"bg-error-50 p-4 rounded-lg border border-error-200"},P={class:"text-sm text-error-700 space-y-1"},F={key:0,class:"font-medium"},O={class:"flex justify-end space-x-4"},I=["disabled"],A={key:0,class:"flex items-center"},J={key:1},U={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Y={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},$={class:"mt-3 text-center"},q={class:"mt-2 px-7 py-3"},G={class:"mt-4 text-sm text-gray-700"},H={key:1,class:"mt-8 card p-6"},X={__name:"DestroyView",setup(K){const d=c(!1),u=c(!1),s=D({env:"local",images:[]}),g=c(["openjourney-server","openjourney-web","openjourney-api","openjourney-database"]),f=c([{value:"local",label:"Local Development"},{value:"staging",label:"Staging"},{value:"production",label:"Production"}]),x=async()=>{d.value=!0,u.value=!1;try{console.log("Destroying with config:",s),await new Promise(n=>setTimeout(n,2e3)),alert("Resources destroyed successfully!"),s.images=[]}catch(n){console.error("Destroy failed:",n),alert("Destroy operation failed. Please try again.")}finally{d.value=!1}},b=n=>{const t=s.images.indexOf(n);t>-1?s.images.splice(t,1):s.images.push(n)},h=()=>{u.value=!0},w=()=>{u.value=!1};return(n,t)=>{const k=R("RouterLink");return l(),r("div",N,[t[16]||(t[16]=v('<div class="mb-8"><h1 class="text-3xl font-bold text-gray-900 mb-2">Destroy Resources</h1><p class="text-gray-600"> Clean up and remove deployed OpenJourney Server resources from your environment. </p></div><div class="bg-error-50 border border-error-200 rounded-lg p-4 mb-8"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-error-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-error-800">Destructive Operation</h3><div class="mt-2 text-sm text-error-700"><p>This operation will permanently remove the selected resources. This action cannot be undone.</p></div></div></div></div>',2)),e("div",V,[e("form",{onSubmit:C(h,["prevent"]),class:"space-y-6"},[e("div",null,[t[1]||(t[1]=e("label",{class:"form-label"},"Environment",-1)),_(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.env=o),class:"form-input"},[(l(!0),r(p,null,y(f.value,o=>(l(),r("option",{key:o.value,value:o.value},i(o.label),9,T))),128))],512),[[L,s.env]]),t[2]||(t[2]=e("p",{class:"text-sm text-gray-500 mt-1"}," Select the environment from which to remove resources. ",-1))]),e("div",null,[t[3]||(t[3]=e("label",{class:"form-label"},"Components to Remove",-1)),e("div",z,[(l(!0),r(p,null,y(g.value,o=>(l(),r("div",{key:o,class:"flex items-center"},[e("input",{id:o,type:"checkbox",checked:s.images.includes(o),onChange:Q=>b(o),class:"h-4 w-4 text-error-600 focus:ring-error-500 border-gray-300 rounded"},null,40,B),e("label",{for:o,class:"ml-2 text-sm text-gray-700 capitalize"},i(o.replace("-"," ")),9,M)]))),128))]),t[4]||(t[4]=e("p",{class:"text-sm text-gray-500 mt-1"}," Select which components to remove from the deployment. ",-1))]),e("div",E,[t[7]||(t[7]=e("h3",{class:"text-sm font-medium text-error-900 mb-2"},"Destruction Summary",-1)),e("div",P,[e("p",null,[t[5]||(t[5]=e("strong",null,"Environment:",-1)),a(" "+i(s.env),1)]),e("p",null,[t[6]||(t[6]=e("strong",null,"Components to Remove:",-1)),a(" "+i(s.images.length>0?s.images.join(", "):"None selected"),1)]),s.images.length>0?(l(),r("p",F," ⚠️ This will permanently delete all data associated with these components. ")):m("",!0)])]),e("div",O,[j(k,{to:"/",class:"btn btn-secondary"},{default:S(()=>t[8]||(t[8]=[a(" Cancel ")])),_:1,__:[8]}),e("button",{type:"submit",disabled:d.value||s.images.length===0,class:"btn btn-error disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(l(),r("span",A,t[9]||(t[9]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},null,-1),a(" Destroying... ")]))):(l(),r("span",J,"Destroy Resources"))],8,I)])],32)]),u.value?(l(),r("div",U,[e("div",Y,[e("div",$,[t[13]||(t[13]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-error-100"},[e("svg",{class:"h-6 w-6 text-error-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t[14]||(t[14]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mt-4"},"Confirm Destruction",-1)),e("div",q,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-500"}," Are you sure you want to destroy the selected resources? This action cannot be undone and will permanently delete all associated data. ",-1)),e("div",G,[e("p",null,[t[10]||(t[10]=e("strong",null,"Environment:",-1)),a(" "+i(s.env),1)]),e("p",null,[t[11]||(t[11]=e("strong",null,"Components:",-1)),a(" "+i(s.images.join(", ")),1)])])]),e("div",{class:"items-center px-4 py-3"},[e("div",{class:"flex space-x-3"},[e("button",{onClick:w,class:"px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Cancel "),e("button",{onClick:x,class:"px-4 py-2 bg-error-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-error-700 focus:outline-none focus:ring-2 focus:ring-error-300"}," Yes, Destroy ")])])])])])):m("",!0),d.value?(l(),r("div",H,t[15]||(t[15]=[v('<h3 class="text-lg font-semibold text-gray-900 mb-4">Destruction Progress</h3><div class="space-y-3"><div class="flex items-center"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-error-600 mr-3"></div><span class="text-sm text-gray-600">Removing resources...</span></div><div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-error-600 h-2 rounded-full animate-pulse" style="width:60%;"></div></div></div>',2)]))):m("",!0),t[17]||(t[17]=e("div",{class:"mt-8 card p-6"},[e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Current Deployments"),e("div",{class:"text-sm text-gray-500 text-center py-8"}," No active deployments found. Deploy resources first to see them here. ")],-1))])}}};export{X as default};
